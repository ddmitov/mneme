<!DOCTYPE html>
<html>

  <head>
    <title>Mneme</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">

    <script src="<%= url_for("mneme.js")->to_abs->scheme('https') %>"></script>
    <link rel="stylesheet" type="text/css"
      href="<%= url_for("mneme.css")->to_abs->scheme('https') %>" media="all">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" media="all">

    <style type='text/css'>
      body {
        text-align: center;
        font-family: sans-serif;
      }

      .page-header {
        margin-top: 8px;
      }

      .row {
        margin-left: 8px;
        margin-top: 8px;
        margin-right: 8px;
        margin-bottom: 8px;
      }
    </style>
  </head>

  <body>
    <div class="container">
      <div class="page-header">
        <h1><a href="https://en.wikipedia.org/wiki/Mneme">Mneme</a></h1>
      </div>

      <div class="row justify-content-center">
        <h4>
          бърз преговор на основни факти от българската история
          <br>
          <i>в процес на разработка</i>
        </h4>
      </div>

      <div id="question">
        <div class="row justify-content-center">
          <a title="See page for author [Public domain], via Wikimedia Commons"
            href="https://commons.wikimedia.org/wiki/File%3ACoat_of_Arms_of_Bulgaria_XVII_century%2C_Insignia_procerum.jpg">
            <img width="256" alt="Coat of Arms of Bulgaria XVII century, Insignia procerum"
              src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/76/Coat_of_Arms_of_Bulgaria_XVII_century%2C_Insignia_procerum.jpg/256px-Coat_of_Arms_of_Bulgaria_XVII_century%2C_Insignia_procerum.jpg"/>
          </a>
        </div>
      </div>

      <div id="buttons">
        <div class="row justify-content-center">
          <div class="btn btn-primary" onclick="javascript:getNextQuestion();">
            Започни
          </div>
        </div>
      </div>
    </div>

    <script>
      function getNextQuestion() {
        var questionForm = document.querySelector('form[name=question]');
        var nextQuestionNumber;
        if (questionForm === null) {
          nextQuestionNumber = 1;
        } else {
          nextQuestionNumber = parseInt(questionForm.id) + 1;
        }

        $.ajax({
          url: '/get_question',
          dataType: 'text',
          data: {'number': nextQuestionNumber},
          cache: false,
          type: 'GET',
          success: function(data) {
            if (data.length > 0) {
              insertQuestion(JSON.parse(data));
              console.log('Question Nr.: ' + nextQuestionNumber);
            } else {
              console.log('No more questions.');
            }
          }
        });
      }
    </script>
  </body>
</html>
